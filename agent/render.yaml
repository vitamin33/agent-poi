# Agent PoI - Multi-Agent Deployment on Render (Single Service)
# Three autonomous agents (Alpha, Beta, Gamma) in ONE process on Render free tier.
# Agents communicate internally via HTTP through the same process.
#
# Routes:
#   /         - Network overview
#   /alpha/*  - DeFi specialist agent
#   /beta/*   - Security specialist agent
#   /gamma/*  - Solana specialist agent
#   /network  - Aggregated A2A interaction view
#   /health   - Gateway health check
services:
  - type: web
    name: agent-poi-network
    env: docker
    plan: free
    dockerfilePath: ./agent/Dockerfile
    dockerContext: ./agent
    healthCheckPath: /health
    envVars:
      # Multi-agent mode flag
      - key: MULTI_AGENT
        value: "true"

      # Shared Solana config
      - key: SOLANA_RPC_URL
        value: https://thrumming-thrumming-pond.solana-devnet.quiknode.pro/d5b2a7acac061e59f4e38a8d69ec8740a8da3f47/
      - key: PROGRAM_ID
        value: EQ2Zv3cTDBzY1PafPz2WDoup6niUv6X8t9id4PBACL38

      # Public URL of this service (for A2A discovery)
      - key: AGENT_PUBLIC_URL
        value: https://agent-poi-network.onrender.com

      # LLM-as-Judge (Anthropic Claude Haiku)
      - key: ANTHROPIC_API_KEY
        sync: false

      # Per-agent wallet JSON strings (set manually in Render dashboard)
      # Each agent needs its own Solana wallet for on-chain registration
      - key: WALLET_JSON_ALPHA
        sync: false
      - key: WALLET_JSON_BETA
        sync: false
      - key: WALLET_JSON_GAMMA
        sync: false
